BEGIN EXECUTE IMMEDIATE 'DROP TABLE CALL_FORWARDING'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -942 THEN RAISE; END IF; END;;
BEGIN EXECUTE IMMEDIATE 'DROP TABLE SPECIAL_FACILITY'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -942 THEN RAISE; END IF; END;;
BEGIN EXECUTE IMMEDIATE 'DROP TABLE ACCESS_INFO'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -942 THEN RAISE; END IF; END;;
BEGIN EXECUTE IMMEDIATE 'DROP TABLE SUBSCRIBER'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -942 THEN RAISE; END IF; END;;

CREATE TABLE SUBSCRIBER (
   s_id INTEGER NOT NULL PRIMARY KEY,
   sub_nbr VARCHAR(15) NOT NULL UNIQUE,
   bit_1 NUMBER(3, 0),
   bit_2 NUMBER(3, 0),
   bit_3 NUMBER(3, 0),
   bit_4 NUMBER(3, 0),
   bit_5 NUMBER(3, 0),
   bit_6 NUMBER(3, 0),
   bit_7 NUMBER(3, 0),
   bit_8 NUMBER(3, 0),
   bit_9 NUMBER(3, 0),
   bit_10 NUMBER(3, 0),
   hex_1 NUMBER(3, 0),
   hex_2 NUMBER(3, 0),
   hex_3 NUMBER(3, 0),
   hex_4 NUMBER(3, 0),
   hex_5 NUMBER(3, 0),
   hex_6 NUMBER(3, 0),
   hex_7 NUMBER(3, 0),
   hex_8 NUMBER(3, 0),
   hex_9 NUMBER(3, 0),
   hex_10 NUMBER(3, 0),
   byte2_1 NUMBER(5,0),
   byte2_2 NUMBER(5,0),
   byte2_3 NUMBER(5,0),
   byte2_4 NUMBER(5,0),
   byte2_5 NUMBER(5,0),
   byte2_6 NUMBER(5,0),
   byte2_7 NUMBER(5,0),
   byte2_8 NUMBER(5,0),
   byte2_9 NUMBER(5,0),
   byte2_10 NUMBER(5,0),
   msc_location 	NUMBER(10, 0),
   vlr_location 	NUMBER(10, 0)
);

CREATE TABLE ACCESS_INFO (
   s_id INTEGER NOT NULL,
   ai_type NUMBER(3,0) NOT NULL,
   data1 NUMBER(3,0),
   data2 NUMBER(3,0),
   data3 VARCHAR2(3),
   data4 VARCHAR2(5),
   PRIMARY KEY(s_id, ai_type),
   FOREIGN KEY (s_id) REFERENCES SUBSCRIBER (s_id)
);

CREATE TABLE SPECIAL_FACILITY (
   s_id INTEGER NOT NULL,
   sf_type NUMBER(3,0) NOT NULL,
   is_active NUMBER(3,0) NOT NULL,
   error_cntrl NUMBER(5,0),
   data_a NUMBER(5,0),
   data_b VARCHAR2(5),
   PRIMARY KEY (s_id, sf_type),
   FOREIGN KEY (s_id) REFERENCES SUBSCRIBER (s_id)
);

CREATE TABLE CALL_FORWARDING (
   s_id INTEGER NOT NULL,
   sf_type NUMBER(3,0) NOT NULL,
   start_time NUMBER(3,0) NOT NULL,
   end_time NUMBER(3,0),
   numberx VARCHAR2(15),
   PRIMARY KEY (s_id, sf_type, start_time),
   FOREIGN KEY (s_id, sf_type) REFERENCES SPECIAL_FACILITY(s_id, sf_type)
);
CREATE INDEX IDX_CF ON CALL_FORWARDING (S_ID);